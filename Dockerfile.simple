# ğŸ³ PythonLearn-Zeabur-PHP ç°¡åŒ–ç‰ˆ Dockerfile
# ç´” HTTP è¼ªè©¢æ¶æ§‹

FROM php:8.2-cli

# å®‰è£åŸºæœ¬ä¾è³´
RUN apt-get update && apt-get install -y \
    git \
    unzip \
    curl \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£ Composer
COPY --from=composer:latest /usr/bin/composer /usr/bin/composer

# è¨­ç½®å·¥ä½œç›®éŒ„
WORKDIR /app

# è¤‡è£½æ‡‰ç”¨ç¨‹å¼ä»£ç¢¼
COPY . .

# å®‰è£ PHP ä¾è³´ï¼ˆå¦‚æœæœ‰ composer.jsonï¼‰
RUN if [ -f composer.json ]; then composer install --no-dev --optimize-autoloader; fi

# å‰µå»ºå¿…è¦ç›®éŒ„
RUN mkdir -p data storage

# è¨­ç½®åŸºæœ¬æ¬Šé™
RUN chmod -R 755 public \
    && chmod -R 777 data \
    && chmod -R 777 storage

# æš´éœ²ç«¯å£ï¼ˆåƒ… HTTPï¼‰
EXPOSE 8080

# å•Ÿå‹•å‘½ä»¤ - ç´” HTTP æœå‹™å™¨
CMD ["php", "-S", "0.0.0.0:8080", "-t", "public"] 