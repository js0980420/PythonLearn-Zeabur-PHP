# 🛠️ PHP協作平台 - 項目工具說明

本文檔說明了項目中各種腳本工具的功能和使用方法。

## 🚀 核心啟動工具

### 1. `start.bat` - 一鍵啟動腳本
**功能**: 自動化啟動整個開發環境
- ✅ 自動檢查和清理端口占用
- ✅ 驗證PHP環境和依賴
- ✅ 同時啟動Web服務器(8080)和WebSocket服務器(8081)
- ✅ 提供多種訪問選項和狀態監控
- ✅ 集成系統清理功能

**使用方法**:
```bash
# 直接雙擊或在命令行運行
.\start.bat
```

**運行後會提供以下選項**:
- [1] 🌐 在瀏覽器中打開學生界面
- [2] 👨‍🏫 在瀏覽器中打開教師後台
- [3] 📊 查看系統狀態
- [4] 🧹 執行系統清理
- [5] 🛑 停止所有服務器

## 🧹 系統維護工具

### 2. `system-cleanup.bat` - 系統清理工具
**功能**: 專門清理PHP相關進程和資源
- 🔄 **快速清理**: 清理PHP進程和端口
- 🧽 **深度清理**: 清理所有相關進程、緩存和臨時文件
- 🎯 **智能清理**: 清理長時間運行的背景進程和殭屍視窗
- 📊 **狀態檢查**: 查看詳細的系統運行狀態

**主要清理內容**:
- PHP進程 (`php.exe`, `php-cgi.exe`)
- 端口占用 (8080, 8081, 開發端口)
- 臨時文件和緩存
- 過期會話和日誌
- 殭屍CMD視窗
- 無響應服務
- 系統網絡緩存

**使用方法**:
```bash
.\system-cleanup.bat
```

### 3. `quick-access.bat` - 快速訪問工具
**功能**: 提供便捷的項目管理和訪問入口
- 🌐 **瀏覽器訪問**: 快速打開各種界面
- 🛠️ **系統工具**: 集成清理、重啟、狀態查看
- 📚 **開發工具**: 日誌查看、配置編輯、依賴檢查
- 🌍 **局域網設置**: 配置局域網訪問

**主要功能**:
- 學生/教師界面快速訪問
- 系統狀態實時監控
- 配置文件編輯
- 局域網訪問配置
- 防火牆規則設置

**使用方法**:
```bash
.\quick-access.bat
```

## 🔧 工具特性對比

| 工具 | 主要用途 | 適用場景 | 自動化程度 |
|------|----------|----------|------------|
| `start.bat` | 系統啟動 | 日常開發、演示 | 🌟🌟🌟🌟🌟 |
| `system-cleanup.bat` | 問題排除 | 故障診斷、維護 | 🌟🌟🌟🌟 |
| `quick-access.bat` | 便捷管理 | 開發調試、配置 | 🌟🌟🌟 |

## 🎯 使用建議

### 日常開發流程
1. **首次啟動**: 使用 `start.bat`
2. **遇到問題**: 使用 `system-cleanup.bat` 的智能清理
3. **需要調試**: 使用 `quick-access.bat` 查看狀態和日誌
4. **重新啟動**: 直接在 `start.bat` 中選擇停止/重啟

### 故障排除流程
1. **服務器無法啟動** → 運行 `system-cleanup.bat` 深度清理
2. **端口被占用** → 使用 `start.bat` 的自動清理功能
3. **連接問題** → 用 `quick-access.bat` 檢查網絡狀態
4. **性能問題** → 使用智能清理清除長時間運行的進程

## ⚡ 優化特性

### 自動化改進
- ✅ **無人值守啟動**: 自動檢測和解決常見問題
- ✅ **智能端口管理**: 自動釋放占用端口
- ✅ **進程優化**: 防止PHP進程堆積
- ✅ **資源清理**: 定期清理臨時文件和緩存

### 用戶體驗改進
- 🎨 **彩色界面**: 清晰的視覺反饋
- 📊 **詳細狀態**: 實時系統信息顯示
- 🔄 **一鍵操作**: 減少手動命令輸入
- ⚠️ **錯誤提示**: 友好的錯誤信息和解決建議

### 系統穩定性
- 🛡️ **錯誤處理**: 完善的異常捕獲和恢復
- 🧹 **資源管理**: 避免資源泄漏和進程殭屍化
- 📈 **性能監控**: 實時監控系統負載
- 🔄 **自動恢復**: 自動解決常見配置問題

## 🌐 訪問地址

| 服務 | 本地訪問 | 局域網訪問 |
|------|----------|------------|
| 學生界面 | http://localhost:8080 | http://[本機IP]:8080 |
| 教師後台 | http://localhost:8080/teacher-dashboard.html | http://[本機IP]:8080/teacher-dashboard.html |
| 健康檢查 | http://localhost:8080/health | http://[本機IP]:8080/health |
| WebSocket | ws://localhost:8081 | ws://[本機IP]:8081 |

## 🚨 注意事項

1. **管理員權限**: 某些清理操作可能需要管理員權限
2. **防火牆設置**: 局域網訪問需要配置防火牆規則
3. **PHP環境**: 確保PHP 8.0+已正確安裝並加入PATH
4. **端口沖突**: 確保8080和8081端口未被其他應用占用
5. **數據安全**: 清理操作會刪除臨時文件，重要數據請先備份

## 📞 技術支援

如遇到問題，請依次嘗試：
1. 運行 `system-cleanup.bat` 進行系統清理
2. 檢查PHP環境和依賴安裝
3. 查看 `logs/` 目錄中的錯誤日誌
4. 使用 `quick-access.bat` 檢查系統狀態
5. 重啟計算機後重新運行 `start.bat` 