# ğŸš€ PythonLearn-Zeabur-PHP å°ˆæ¡ˆé–‹ç™¼è¦å‰‡

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°
PythonLearn-Zeabur-PHP æ˜¯ä¸€å€‹å¤šäººå”ä½œçš„ Python å­¸ç¿’å¹³å°ï¼Œæ”¯æ´å³æ™‚ä»£ç¢¼ç·¨è¼¯ã€AI åŠ©æ•™ã€è¡çªæª¢æ¸¬ç­‰åŠŸèƒ½ã€‚

## ğŸ¯ æ ¸å¿ƒé–‹ç™¼åŸå‰‡

### 1. ä»£ç¢¼å“è³ªå„ªå…ˆ
- **å¯è®€æ€§**: æ¸…æ™°çš„è®Šæ•¸åç¨±å’Œå‡½æ•¸çµæ§‹
- **å¯ç¶­è­·**: æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œä¾¿æ–¼ä¿®æ”¹å’Œæ“´å±•
- **å¯æ¸¬è©¦**: ç´”å‡½æ•¸è¨­è¨ˆï¼Œä¾¿æ–¼å–®å…ƒæ¸¬è©¦
- **æ€§èƒ½å„ªåŒ–**: é«˜æ•ˆçš„ç®—æ³•å’Œå…§å­˜ç®¡ç†

### 2. å‡½æ•¸è¨­è¨ˆè¦ç¯„

#### å‘½åè¦ç¯„
```javascript
// âœ… è‰¯å¥½çš„å‘½åç¯„ä¾‹
const userName = 'student123';
const isUserConnected = true;
const webSocketManager = new WebSocketManager();

// å‡½æ•¸å‘½å - å‹•è©é–‹é ­ï¼Œæè¿°åŠŸèƒ½
function connectToWebSocket(url) { }
function validateUserInput(input) { }
function handleCodeChange(newCode) { }

// é¡åˆ¥å‘½å - é¦–å­—æ¯å¤§å¯«é§å³°
class CodeEditor { }
class WebSocketManager { }
```

#### ç´”å‡½æ•¸è¨­è¨ˆ
```javascript
// âœ… ç´”å‡½æ•¸ç¯„ä¾‹ - ç„¡å‰¯ä½œç”¨ï¼Œç›¸åŒè¼¸å…¥ç”¢ç”Ÿç›¸åŒè¼¸å‡º
function validateUserData(userData) {
    const errors = [];
    
    if (!userData.name || userData.name.trim().length === 0) {
        errors.push('ç”¨æˆ¶åç¨±ä¸èƒ½ç‚ºç©º');
    }
    
    return {
        isValid: errors.length === 0,
        errors: errors,
        userData: userData
    };
}
```

#### ç•°æ­¥å‡½æ•¸è¨­è¨ˆ
```javascript
// âœ… ç•°æ­¥æ“ä½œçš„æ­£ç¢ºè™•ç†
async function connectToWebSocket(url) {
    return new Promise((resolve, reject) => {
        try {
            const ws = new WebSocket(url);
            
            const connectionTimeout = setTimeout(() => {
                reject(new Error('Connection timeout'));
            }, 10000);
            
            ws.onopen = () => {
                clearTimeout(connectionTimeout);
                resolve(true);
            };
            
            ws.onerror = (error) => {
                clearTimeout(connectionTimeout);
                reject(new Error('Connection failed'));
            };
        } catch (error) {
            reject(error);
        }
    });
}
```

### 3. éŒ¯èª¤è™•ç†è¦ç¯„

#### å…¨åŸŸéŒ¯èª¤è™•ç†
```javascript
class ErrorHandler {
    constructor() {
        this.setupGlobalHandlers();
        this.errorLog = [];
    }
    
    setupGlobalHandlers() {
        window.addEventListener('error', (event) => {
            this.handleError({
                type: 'runtime',
                message: event.message,
                filename: event.filename,
                line: event.lineno,
                timestamp: Date.now()
            });
        });
    }
    
    handleError(errorInfo) {
        this.logError(errorInfo);
        this.showUserError(errorInfo);
        this.reportError(errorInfo);
    }
}
```

#### å®‰å…¨åŸ·è¡Œå‡½æ•¸
```javascript
function safeExecute(fn, context = 'Unknown', fallbackValue = null) {
    try {
        return fn();
    } catch (error) {
        console.error(`Error in ${context}:`, error);
        return fallbackValue;
    }
}
```

### 4. æ€§èƒ½å„ªåŒ–æŠ€å·§

#### é˜²æŠ–å’Œç¯€æµ
```javascript
function debounce(func, wait, immediate = false) {
    let timeout;
    
    return function executedFunction(...args) {
        const later = () => {
            timeout = null;
            if (!immediate) func.apply(this, args);
        };
        
        const callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        
        if (callNow) func.apply(this, args);
    };
}

function throttle(func, limit) {
    let inThrottle;
    
    return function(...args) {
        if (!inThrottle) {
            func.apply(this, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    };
}
```

## ğŸ” å­˜å–è¦å‰‡

### 1. æª”æ¡ˆå­˜å–æ¬Šé™

#### æ ¸å¿ƒæª”æ¡ˆ (å”¯è®€ä¿è­·)
```
- zeabur.yaml (éƒ¨ç½²é…ç½®)
- composer.json (ä¾è³´ç®¡ç†)
- .gitignore (ç‰ˆæœ¬æ§åˆ¶)
- router.php (è·¯ç”±é…ç½®)
```

#### å¯ç·¨è¼¯æª”æ¡ˆ
```
- public/js/*.js (å‰ç«¯é‚è¼¯)
- backend/api/*.php (API ç«¯é»)
- backend/classes/*.php (å¾Œç«¯é¡åˆ¥)
- css/styles.css (æ¨£å¼)
- websocket/server.php (WebSocket æœå‹™)
```

#### è‡¨æ™‚æª”æ¡ˆ (å¯åˆªé™¤)
```
- data/rooms/*.txt (æˆ¿é–“æ•¸æ“š)
- *.log (æ—¥èªŒæª”æ¡ˆ)
- *.tmp (è‡¨æ™‚æª”æ¡ˆ)
```

### 2. è³‡æ–™åº«å­˜å–è¦å‰‡

#### æœ¬åœ°å­˜å„²æ¨¡å¼
```php
class Database {
    private $localStorage = [];
    
    public function insert($table, $data) {
        // è‡ªå‹•æ·»åŠ  ID å’Œæ™‚é–“æˆ³
        $id = $this->nextId++;
        $data['id'] = $id;
        $data['created_at'] = date('Y-m-d H:i:s');
        
        // ç‚º code_history è¡¨è‡ªå‹•è¨­ç½®ç‰ˆæœ¬è™Ÿ
        if ($table === 'code_history' && !isset($data['version_number'])) {
            $maxVersion = $this->getMaxVersion($data['room_id']);
            $data['version_number'] = $maxVersion + 1;
        }
        
        return $id;
    }
}
```

#### é›²ç«¯è³‡æ–™åº«æ¨¡å¼
```php
class Database {
    public function connect() {
        if ($this->isZeaburEnvironment()) {
            // ä½¿ç”¨ç’°å¢ƒè®Šæ•¸é€£æ¥é›²ç«¯è³‡æ–™åº«
            $this->pdo = new PDO(
                $_ENV['DATABASE_URL'],
                $_ENV['DB_USERNAME'],
                $_ENV['DB_PASSWORD']
            );
        }
    }
}
```

### 3. API å­˜å–æ§åˆ¶

#### é€Ÿç‡é™åˆ¶
```php
class RateLimiter {
    private $limits = [
        'ai_request' => ['count' => 10, 'window' => 60],
        'code_save' => ['count' => 30, 'window' => 60],
        'room_create' => ['count' => 5, 'window' => 300]
    ];
    
    public function checkLimit($userId, $action) {
        $key = "rate_limit:{$userId}:{$action}";
        $current = $this->getCount($key);
        $limit = $this->limits[$action];
        
        if ($current >= $limit['count']) {
            throw new RateLimitException('è«‹æ±‚éæ–¼é »ç¹');
        }
    }
}
```

#### è¼¸å…¥é©—è­‰
```php
class InputValidator {
    public function validateRoomId($roomId) {
        return preg_match('/^room_[a-zA-Z0-9_]+$/', $roomId);
    }
    
    public function validateCode($code) {
        return strlen($code) <= 10000 && mb_check_encoding($code, 'UTF-8');
    }
    
    public function sanitizeInput($input) {
        return htmlspecialchars(trim($input), ENT_QUOTES, 'UTF-8');
    }
}
```

### 4. WebSocket å­˜å–è¦å‰‡

#### é€£æ¥é©—è­‰
```javascript
class WebSocketManager {
    connect(url, userId, roomId) {
        if (!this.validateUserId(userId) || !this.validateRoomId(roomId)) {
            throw new Error('Invalid user or room ID');
        }
        
        this.ws = new WebSocket(url);
        this.setupEventHandlers();
    }
    
    validateUserId(userId) {
        return /^[a-zA-Z0-9_]{3,20}$/.test(userId);
    }
    
    validateRoomId(roomId) {
        return /^room_[a-zA-Z0-9_]+$/.test(roomId);
    }
}
```

#### æ¶ˆæ¯éæ¿¾
```php
class MessageHandler {
    public function handleMessage($connection, $message) {
        $data = json_decode($message, true);
        
        // é©—è­‰æ¶ˆæ¯æ ¼å¼
        if (!$this->validateMessage($data)) {
            $this->sendError($connection, 'ç„¡æ•ˆçš„æ¶ˆæ¯æ ¼å¼');
            return;
        }
        
        // æª¢æŸ¥ç”¨æˆ¶æ¬Šé™
        if (!$this->checkPermission($connection, $data['type'])) {
            $this->sendError($connection, 'æ¬Šé™ä¸è¶³');
            return;
        }
        
        $this->processMessage($connection, $data);
    }
}
```

## ğŸ› ï¸ é–‹ç™¼å·¥å…·è¦ç¯„

### 1. ä»£ç¢¼æª¢æŸ¥
```javascript
class CodeQualityAnalyzer {
    static analyzeFunctionComplexity(func) {
        const funcString = func.toString();
        const cyclomaticComplexity = this.calculateCyclomaticComplexity(funcString);
        
        return {
            complexity: cyclomaticComplexity,
            recommendation: this.getComplexityRecommendation(cyclomaticComplexity)
        };
    }
}
```

### 2. å…§å­˜ç®¡ç†
```javascript
class EventManager {
    constructor() {
        this.listeners = new Set();
    }
    
    addEventListener(element, event, handler, options = {}) {
        element.addEventListener(event, handler, options);
        this.listeners.add({ element, event, handler, options });
    }
    
    cleanup() {
        for (const listener of this.listeners) {
            listener.element.removeEventListener(
                listener.event, 
                listener.handler, 
                listener.options
            );
        }
        this.listeners.clear();
    }
}
```

## ğŸ“Š ç›£æ§å’Œæ—¥èªŒ

### 1. æ€§èƒ½ç›£æ§
```javascript
class PerformanceMonitor {
    static measureFunction(func, name) {
        return function(...args) {
            const start = performance.now();
            const result = func.apply(this, args);
            const end = performance.now();
            
            console.log(`â±ï¸ ${name} åŸ·è¡Œæ™‚é–“: ${(end - start).toFixed(2)}ms`);
            return result;
        };
    }
}
```

### 2. éŒ¯èª¤æ—¥èªŒ
```php
class Logger {
    public function error($message, $context = []) {
        $logEntry = [
            'level' => 'ERROR',
            'message' => $message,
            'context' => $context,
            'timestamp' => date('c'),
            'memory_usage' => memory_get_usage(true)
        ];
        
        error_log(json_encode($logEntry));
    }
}
```

## ğŸš€ éƒ¨ç½²è¦ç¯„

### 1. ç’°å¢ƒæª¢æ¸¬
```php
function detectEnvironment() {
    if (isset($_ENV['ZEABUR'])) {
        return 'production';
    } elseif (isset($_ENV['DEVELOPMENT'])) {
        return 'development';
    } else {
        return 'local';
    }
}
```

### 2. é…ç½®ç®¡ç†
```php
class Config {
    private static $config = [];
    
    public static function get($key, $default = null) {
        return self::$config[$key] ?? $_ENV[$key] ?? $default;
    }
    
    public static function load() {
        $env = detectEnvironment();
        self::$config = require "config/{$env}.php";
    }
}
```

---

**ğŸ“ æ–‡æª”ç‰ˆæœ¬**: v2.0  
**ğŸ“… æœ€å¾Œæ›´æ–°**: 2025-06-06  
**ğŸ”§ ç¶­è­·ç‹€æ…‹**: æ´»èºç¶­è­·

**ğŸ¯ æ ¸å¿ƒåŸå‰‡**: 
- âœ… ä»£ç¢¼å¯è®€æ€§å„ªå…ˆï¼Œæ¸…æ™°çš„å‘½åå’Œçµæ§‹
- âœ… éŒ¯èª¤è™•ç†å®Œå–„ï¼Œç”¨æˆ¶é«”é©—å‹å¥½
- âœ… æ€§èƒ½å„ªåŒ–é©åº¦ï¼Œé¿å…éåº¦å„ªåŒ–
- âœ… æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œä¾¿æ–¼ç¶­è­·å’Œæ¸¬è©¦
- âœ… å®‰å…¨å­˜å–æ§åˆ¶ï¼Œä¿è­·æ ¸å¿ƒåŠŸèƒ½ 